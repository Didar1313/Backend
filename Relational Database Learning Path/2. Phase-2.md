### ‚úÖ **Phase 2: SQL Mastery (Hero Level - Part 1)**

> üéØ Goal: Learn how to write powerful, real-world SQL queries to interact with data.

---

## üîπ 1. **Filtering & Sorting**

These two are used together often in real-world queries to pull the exact data you need.

---

### ‚úÖ `WHERE` ‚Äì Filter rows based on condition

üß† Example:

```sql
SELECT * FROM Users
WHERE name = 'Didar';
```

‚û°Ô∏è Fetches only the rows where the name is **Didar**.

You can use operators:

* `=` (equal)
* `!=` or `<>` (not equal)
* `<`, `>`, `<=`, `>=`
* `BETWEEN`, `IN`, `LIKE`, `IS NULL`

üß† Examples:

```sql
SELECT * FROM Users
WHERE id > 5;

SELECT * FROM Users
WHERE email LIKE '%gmail.com';

SELECT * FROM Users
WHERE id IN (1, 3, 5);
```

---

### ‚úÖ `ORDER BY` ‚Äì Sort the result

Sorts data **ascending (`ASC`)** or **descending (`DESC`)**.

üß† Example:

```sql
SELECT * FROM Users
ORDER BY name ASC;

SELECT * FROM Users
ORDER BY id DESC;
```

---

### ‚úÖ Combine `WHERE` + `ORDER BY`

```sql
SELECT * FROM Users
WHERE name LIKE 'D%'
ORDER BY id DESC;
```
---

## üîπ **Special Characters in SQL (Used in `WHERE` Clause)**

---

### ‚úÖ 1. **`%`** ‚Äì Wildcard for any number of characters

Used with `LIKE` to match patterns.

| Pattern  | Meaning                | Example Match        |
| -------- | ---------------------- | -------------------- |
| `'D%'`   | Starts with D          | Didar, Daniel        |
| `'%r'`   | Ends with r            | Didar, Asher         |
| `'%id%'` | Contains "id" anywhere | Didar, Midori, David |

üß† Example:

```sql
SELECT * FROM Users
WHERE name LIKE 'D%';
```

‚û°Ô∏è Finds all names **starting with "D"**

---

### ‚úÖ 2. **`_` (underscore)** ‚Äì Wildcard for **one single character**

| Pattern   | Meaning                        | Matches      |
| --------- | ------------------------------ | ------------ |
| `'D_dar'` | D, any single char, then "dar" | Didar, Dodar |

üß† Example:

```sql
SELECT * FROM Users
WHERE name LIKE 'D_dar';
```

---

### ‚úÖ 3. **`IN`** ‚Äì Matches one of multiple values

üß† Example:

```sql
SELECT * FROM Users
WHERE id IN (1, 2, 3);
```

‚û°Ô∏è Equivalent to: `id = 1 OR id = 2 OR id = 3`

---

### ‚úÖ 4. **`BETWEEN`** ‚Äì Matches values in a **range (inclusive)**

üß† Example:

```sql
SELECT * FROM Orders
WHERE order_date BETWEEN '2024-01-01' AND '2024-12-31';
```

‚û°Ô∏è Gets all orders in the year 2024

---

### ‚úÖ 5. **`IS NULL` / `IS NOT NULL`** ‚Äì Check if value is missing

üß† Example:

```sql
SELECT * FROM Users
WHERE email IS NULL;
```

‚û°Ô∏è Finds users **without an email**

---

### ‚úÖ 6. **`<>` or `!=`** ‚Äì Not equal

üß† Example:

```sql
SELECT * FROM Users
WHERE name <> 'Didar';
```

---

Great! Let's dive into the next topic of **Phase 2**:

---

## üîπ **2. Aggregations ‚Äì COUNT, SUM, AVG, GROUP BY, HAVING**

> üéØ Goal: Learn how to summarize and analyze your data.

---

### ‚úÖ **Aggregate Functions**

---

### üî∏ `COUNT()` ‚Äì Count number of rows

üß† Example:

```sql
SELECT COUNT(*) FROM Users;
```

‚û°Ô∏è Counts **all users**

```sql
SELECT COUNT(email) FROM Users;
```

‚û°Ô∏è Counts only users **who have an email** (ignores NULLs)

---

### üî∏ `SUM()` ‚Äì Total value of a column

üß† Example:

```sql
SELECT SUM(price) FROM Orders;
```

‚û°Ô∏è Calculates the **total price** of all orders

---

### üî∏ `AVG()` ‚Äì Average value

üß† Example:

```sql
SELECT AVG(price) FROM Orders;
```

‚û°Ô∏è Calculates the **average order price**

---

### üî∏ `MAX()` and `MIN()` ‚Äì Highest and lowest values

üß† Example:

```sql
SELECT MAX(price), MIN(price) FROM Orders;
```

---

## üîπ **GROUP BY** ‚Äì Group rows and apply aggregation **to each group**

üß† Example:

```sql
SELECT user_id, COUNT(*) AS total_orders
FROM Orders
GROUP BY user_id;
```

‚û°Ô∏è Counts how many orders **each user** has made.

---

### üî∏ `GROUP BY` with `SUM()`:

```sql
SELECT category, SUM(price) AS total_sales
FROM Products
GROUP BY category;
```

‚û°Ô∏è Total sales per product category

---

## üîπ **HAVING** ‚Äì Filter groups (used **after** `GROUP BY`)

üß† Example:

```sql
SELECT user_id, COUNT(*) AS total_orders
FROM Orders
GROUP BY user_id
HAVING total_orders > 5;
```

‚û°Ô∏è Shows only users with **more than 5 orders**

üîë Use `HAVING` for **group filters**
üîë Use `WHERE` for **row filters**

---

### ‚úÖ Summary

| Function        | Use                             |
| --------------- | ------------------------------- |
| `COUNT()`       | Number of rows                  |
| `SUM()`         | Total value                     |
| `AVG()`         | Average value                   |
| `MAX()`/`MIN()` | Largest/Smallest value          |
| `GROUP BY`      | Group rows by a column          |
| `HAVING`        | Filter groups after aggregation |

---


## üîπ **3. JOINS in SQL**

> üéØ Goal: Combine data from multiple tables using related columns (usually foreign keys).

---

### üß† Why Use JOINs?

* Real-world data is **split across multiple tables**.
* You need JOINs to **bring related data together**.

---

### ‚úÖ **Basic Tables Example**

Let‚Äôs say we have these two tables:

#### `Users` table:

| id | name  |
| -- | ----- |
| 1  | Didar |
| 2  | Sarah |
| 3  | John  |

#### `Orders` table:

| id | user\_id | item    |
| -- | -------- | ------- |
| 1  | 1        | Laptop  |
| 2  | 1        | Mouse   |
| 3  | 2        | Monitor |

---

## üî∏ 1. **INNER JOIN**

> Returns **only matching rows** from both tables.

```sql
SELECT Users.name, Orders.item
FROM Users
INNER JOIN Orders
ON Users.id = Orders.user_id;
```

### ‚úÖ Result:

| name  | item    |
| ----- | ------- |
| Didar | Laptop  |
| Didar | Mouse   |
| Sarah | Monitor |

* `John` has no orders, so he‚Äôs **excluded**

---

## üî∏ 2. **LEFT JOIN** (or LEFT OUTER JOIN)

> Returns **all rows from the left table** (`Users`), even if there's no match in `Orders`.

```sql
SELECT Users.name, Orders.item
FROM Users
LEFT JOIN Orders
ON Users.id = Orders.user_id;
```

### ‚úÖ Result:

| name  | item    |
| ----- | ------- |
| Didar | Laptop  |
| Didar | Mouse   |
| Sarah | Monitor |
| John  | NULL    |

* `John` appears even though he has **no order**.

---

## üî∏ 3. **RIGHT JOIN**

> Opposite of LEFT JOIN: returns all from **right table**, even if no match in left.

```sql
SELECT Users.name, Orders.item
FROM Users
RIGHT JOIN Orders
ON Users.id = Orders.user_id;
```

* If there are orders without a user (not usual), they‚Äôll still appear.

---

## üî∏ 4. **FULL JOIN** (or FULL OUTER JOIN)

> Returns **all rows** from both tables. If no match, fills with `NULL`.

```sql
SELECT Users.name, Orders.item
FROM Users
FULL OUTER JOIN Orders
ON Users.id = Orders.user_id;
```

> Not supported in all databases (e.g., MySQL doesn't support it natively ‚Äî workarounds needed).

---

## ‚úÖ Summary Table:

| Join Type  | Returns                            |
| ---------- | ---------------------------------- |
| INNER JOIN | Only matched rows from both tables |
| LEFT JOIN  | All from left + matched from right |
| RIGHT JOIN | All from right + matched from left |
| FULL JOIN  | All from both, matched or not      |

---

## üîπ **4. Subqueries & Aliases**

> üéØ Goal: Use queries **inside other queries** to solve more complex problems and give temporary names using **aliases**.

---

## ‚úÖ PART 1: **Subqueries**

### üß† What is a Subquery?

A **subquery** is a query **inside** another SQL query. It's usually written inside `()` parentheses.

You can use a subquery:

* In the `WHERE` clause
* In the `FROM` clause
* In the `SELECT` clause

---

### üî∏ Subquery in `WHERE` Clause

```sql
SELECT name
FROM Users
WHERE id IN (
  SELECT user_id
  FROM Orders
  WHERE item = 'Laptop'
);
```

‚û°Ô∏è This gets names of users **who bought a Laptop**

---

### üî∏ Subquery in `FROM` Clause (used as a temporary table)

```sql
SELECT AVG(total_orders)
FROM (
  SELECT user_id, COUNT(*) AS total_orders
  FROM Orders
  GROUP BY user_id
) AS order_summary;
```

‚û°Ô∏è First, we calculate total orders per user
‚û°Ô∏è Then we calculate the **average number of orders per user**

---

### üî∏ Subquery in `SELECT` Clause

```sql
SELECT name,
       (SELECT COUNT(*) FROM Orders WHERE Orders.user_id = Users.id) AS total_orders
FROM Users;
```

‚û°Ô∏è Adds a new column showing how many orders each user made

---

## ‚úÖ PART 2: **Aliases (again, but deeper)**

Aliases rename **tables** or **columns**, especially useful when:

* You work with subqueries
* You have long or complex expressions
* You want clearer output

---

### üî∏ Column Alias

```sql
SELECT COUNT(*) AS total_users FROM Users;
```

### üî∏ Table Alias

```sql
SELECT u.name, o.item
FROM Users AS u
JOIN Orders AS o
ON u.id = o.user_id;
```

---

### üî∏ Alias with Subquery (a must)

```sql
SELECT *
FROM (
  SELECT category, SUM(price) AS total_sales
  FROM Products
  GROUP BY category
) AS sales_summary;
```

> You **must give a name** (`AS sales_summary`) to a subquery in `FROM`

---

### ‚úÖ Summary

| Concept  | Purpose                                |
| -------- | -------------------------------------- |
| Subquery | Query inside a query                   |
| `WHERE`  | Filter main query with subquery result |
| `FROM`   | Use subquery like a temporary table    |
| `SELECT` | Add calculated columns                 |
| `AS`     | Rename column or table for clarity     |

---




